<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Empath Chat - Mobile</title>
<style>
  :root {
    --bg-main: #121212;
    --bg-message: #2a2a2a;
    --color-text: white;
    --border-user: #570082;
    --border-bot: #005982;
  }

  body {
    margin: 0;
    background-color: var(--bg-main);
    color: var(--color-text);
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }

  /* Icone overlay */
  .icon-logo-small {
    position: absolute;
    top: 10px;
    left: 10px;
    width: 28px;
    height: 28px;
  }
  .icon-info {
    position: absolute;
    bottom: 15px;
    left: 15px;
    width: 24px;
    height: 24px;
  }
  .icon-trash {
    position: absolute;
    bottom: 55px;
    left: 15px;
    width: 24px;
    height: 24px;
  }

  /* Schermata benvenuto */
  #welcome-screen {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    text-align: center;
  }
  #logo {
    width: 200px;
    margin-bottom: 20px;
  }
  #name-input {
    padding: 8px 12px;
    font-size: 16px;
    border-radius: 6px;
    border: none;
    outline: none;
    width: 80%;
  }

  /* Contenitore chat */
  #chat-container {
    flex: 1;
    display: none;
    flex-direction: column;
    height: 100%;
  }

  /* Header chat */
  .chat-header {
    display: flex;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--color-text);
    position: relative;
  }

  /* Area messaggi */
  .messages {
    flex: 1;
    overflow-y: auto;
    padding: 10px;
    display: flex;
    flex-direction: column;
  }
  .message {
    padding: 10px;
    border-radius: 15px;
    max-width: 85%;
    margin-bottom: 8px;
    word-wrap: break-word;
  }
  .user {
    align-self: flex-end;
    background-color: var(--bg-message);
    border: 1px solid var(--border-user);
  }
  .bot {
    align-self: flex-start;
    background-color: var(--bg-message);
    border: 1px solid var(--border-bot);
  }

  /* Input in basso */
  .input-container {
    display: flex;
    align-items: center;
    border-top: 1px solid var(--color-text);
    background-color: var(--bg-main);
    padding: 6px;
  }
  #user-input {
    flex: 1;
    padding: 8px 12px;
    border-radius: 20px;
    border: none;
    outline: none;
    background-color: var(--bg-message);
    color: var(--color-text);
    font-size: 16px;
  }
  .send-button {
    margin-left: 8px;
    background-color: var(--border-user);
    border: none;
    border-radius: 50%;
    width: 38px;
    height: 38px;
    background-image: url('send.png');
    background-size: 60%;
    background-repeat: no-repeat;
    background-position: center;
    cursor: pointer;
  }

  /* Tooltip info */
  .tooltip {
    display: none;
    position: absolute;
    bottom: 50px;
    left: 50px;
    background-color: var(--bg-message);
    color: var(--color-text);
    padding: 8px;
    border-radius: 8px;
    font-size: 12px;
    max-width: 220px;
  }
  .icon-info:hover + .tooltip {
    display: block;
  }
</style>
</head>
<body>

<!-- Schermata benvenuto -->
<div id="welcome-screen">
  <img src="logo.png" alt="Logo" class="icon-logo-small">
  <img src="logo.png" alt="Logo grande" id="logo">
  <h2>Buongiorno, come ti chiami?</h2>
  <input type="text" id="name-input" placeholder="Inserisci il tuo nome">
  <img src="trash.png" alt="Elimina chat" class="icon-trash" onclick="showDeleteConfirm()">
  <img src="info.png" alt="Info" class="icon-info">
  <div class="tooltip">Testo informativo...</div>
</div>

<!-- Chat -->
<div id="chat-container">
  <div class="chat-header">
    <img src="logo.png" alt="Logo" class="icon-logo-small">
    <img src="trash.png" alt="Elimina chat" class="icon-trash" onclick="showDeleteConfirm()">
    <img src="info.png" alt="Info" class="icon-info">
    <div class="tooltip">Testo informativo...</div>
  </div>
  <div class="messages" id="messages"></div>
  <div class="input-container">
    <input type="text" id="user-input" placeholder="Scrivi un messaggio...">
    <button class="send-button" onclick="sendMessage()"></button>
  </div>
</div>

<script>
  /* Mantiene funzioni originali */
  let username = "";
  const botScript = [
    "Ciao un'altra volta. Come stai?",
    "E non la risposta che dai a tutti. Come stai davvero?",
    "La trasparenza è una proprietà della luce. Significa che la luce ti attraversa senza ostacoli. Forse non sei tu a essere trasparente, ma gli altri a essere troppo opachi per vederti."
  ];
  let botIndex = 0;

  const welcomeScreen = document.getElementById('welcome-screen');
  const chatContainer = document.getElementById('chat-container');
  const nameInput = document.getElementById('name-input');
  const userInput = document.getElementById('user-input');
  const messages = document.getElementById('messages');

  nameInput.addEventListener('keydown', e => { if (e.key === 'Enter') startChat(); });
  userInput.addEventListener('keydown', e => { if (e.key === 'Enter') sendMessage(); });

  function startChat() {
    username = nameInput.value.trim();
    if (!username) return;
    welcomeScreen.style.display = 'none';
    chatContainer.style.display = 'flex';
    addBotMessage(`Buongiorno ${username}, come posso esserti d'aiuto?`);
  }

  function sendMessage() {
    const text = userInput.value.trim();
    if (!text) return;
    addMessage(text, 'user');
    userInput.value = '';
    if (botIndex < botScript.length) {
      setTimeout(() => addBotMessage(botScript[botIndex++]), 1000);
    }
  }

  function addMessage(text, type) {
    const msg = document.createElement('div');
    msg.className = `message ${type}`;
    msg.textContent = text;
    messages.appendChild(msg);
    messages.scrollTop = messages.scrollHeight;
  }

  function addBotMessage(text) {
    const msg = document.createElement('div');
    msg.className = 'message bot';
    msg.textContent = text;
    messages.appendChild(msg);
    messages.scrollTop = messages.scrollHeight;
  }

  function showDeleteConfirm() {
    alert("Conferma eliminazione chat");
  }
</script>
</body>
</html>
